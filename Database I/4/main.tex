\documentclass{article}

\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{textcomp}
\usepackage{float}
\usepackage[sorting=none]{biblatex}
\usepackage[margin=1in]{geometry}
\usepackage[font={small,it}]{caption}
\usepackage{placeins}
\usepackage{xepersian}

%\DeclareMathOperator*{\btie}{\bowtie}
\addbibresource{bibliography.bib}
\settextfont[Scale=1.2]{B-NAZANIN.TTF}
\setlatintextfont[Scale=1]{Times New Roman}
\renewcommand{\baselinestretch}{1.5}
\pagestyle{fancy}
\fancyhf{}
\rhead{تکلیف چهارم درس پایگاه داده‌ها 1}
\lhead{\thepage}
\rfoot{علیرضا ابره فروش}
\lfoot{9816603}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
%%%%%%%%%%
\lstset
{
    language=[latex]tex,
    basicstyle=\ttfamily,
    commentstyle=\color{black},
    columns=fullflexible,
    keepspaces=true,
    upquote=true,
    showstringspaces=false,
    morestring=[s]\\\%,
    stringstyle=\color{black},
}
%%%%%%%%%%

\begin{document}
\input{titlepage}

%\tableofcontents
\newpage


\section{}
مراحل ده‌گانه‌ی طراحی پایگاه داده به شرح زیر است.
\begin{enumerate}
    \item \textbf{\lr{Identify Entities}:}
نقش‌ها، رویدادها، مکان‌ها، اشیاءِ ملموس، یا مفاهیمی که نهایتا کاربر درباره‌ی آن‌ها داده نگه‌داری می‌کند را مشخص کنید.
    \item \textbf{\lr{Find Relationships}:}
وابستگی طبیعی بین هر جفت از \lr{entity}ها را با استفاده از یک ماتریس رابطه پیدا کنید.
	\item \textbf{\lr{Draw Rough ERD}:}
\lr{entity}ها را در مستطیل‌ها و روابط را روی قسمت‌های خطی که \lr{entity}ها را به هم ربط می‌دهند قرار دهید.
	\item \textbf{\lr{Fill in Cardinality}:}
تعداد وقوع یک \lr{entity} را به ازای وقوع یکتای \lr{entity} مربوط به آن تعیین کنید.
	\item \textbf{\lr{Define Primary Keys}:}
\lr{attribute} یا \lr{attribute}هایی که وقوع دقیقا یک رکورد از هر \lr{entity} را مشخص می‌کند را مشخص کنید.
	\item \textbf{\lr{Draw Key-Based ERD}:}
روابطِ \lr{Many-to-Many} را حذف کنید و کلید‌های اصلی و خارجی را در هر \lr{entity} وارد کنید.
	\item \textbf{\lr{Identify Attributes}:}
جزئیات اطلاعاتی(فیلدها) که برای سیستم درحال توسعه الزامی هستند را نام‌گذاری کنید.
	\item \textbf{\lr{Map Attributes}:}
هر \lr{attribute} را با دقیقا یک \lr{entity} که آن را توصیف می‌کند، نظیر کنید.
	\item \textbf{\lr{Draw Fully Attributed ERD}:}
\lr{ERD}ِ گام ششم را با \lr{entity}ها و روابط کشف شده در گام هشتم سازگار کنید.
	\item \textbf{\lr{Check Results}:}
آیا \lr{ERD}ِ نهایی سیستم داده را به دقت مجسم می‌کند؟
\end{enumerate}

\section{2}
د
\section{3}
د
\section{4}
\subsection{\lr{a}}
\lr{entity}های \lr{Bank Branch}، \lr{Account} و \lr{Loan} موجودیت‌های \lr{weak}، و سایر \lr{entity}ها موجودیت‌های \lr{strong}، هستند.
\subsection{\lr{b}}
\begin{itemize}
    \item [$\bullet$] رابطه‌ی \lr{Branches}:
هر بانک یک تا چند(\lr{N}) شعبه را پوشش‌دهی می‌کند و هر شعبه تحت پوشش دقیقا یک بانک است.
    \item [$\bullet$] رابطه‌ی \lr{Accts}:
هر شعبه صفر تا چند(\lr{N}) حساب را پوشش‌دهی می‌کند و هر حساب تحت پوشش دقیقا یک شعبه است.
    \item [$\bullet$] رابطه‌ی \lr{Loans}:
هر شعبه صفر تا چند(\lr{N}) وام را اعطا می‌کند و هر وام توسط دقیقا یک شعبه اعطا می‌شود.
    \item [$\bullet$] رابطه‌ی \lr{A-C}:
هر حساب متعلق به یک تا چند(\lr{N}) مشتری است و هر مشتری دارای یک تا چند(\lr{M}) حساب است.
    \item [$\bullet$] رابطه‌ی \lr{L-C}:
هر وام می‌تواند به یک تا چند(\lr{N}) مشتری اعطا شود و هر مشتری می‌تواند صفر تا چند(\lr{M}) وام بگیرد.

\end{itemize}
\subsection{\lr{c}}
\begin{itemize}
    \item [$\bullet$] لیست مشخصات مشتری‌هایی که مانده حساب بیشتر از 1 میلیون دارند
    \item [$\bullet$] مجموع مبلغ وام‌های داده شده توسط یک شعبه خاص
    \item [$\bullet$] تعداد حساب‌های یک مشتری خاص
\end{itemize}
\subsection{\lr{d}}
به ترتیب:
\begin{itemize}
    \item [$\bullet$] فیلدهای \lr{Customer} از \lr{inner join}ِ \lr{Customer} و \lr{A-C} و \lr{Account} به شرط یکسان بودن \lr{SSN}ها در \lr{Customer} و \lr{A-C}، و \lr{AccNo}ها در \lr{A-C} و \lr{Account} و مجموع \lr{Balance}های بیشتر از 1 میلیون به تفکیک \lr{SSN}ها.
    \item [$\bullet$] مجموع روی فیلد \lr{Amount} از \lr{inner join}ِ \lr{Loan} و \lr{Loans} و \lr{Bank Branch} به شرط یکسان بودن \lr{LoanNo}ها در \lr{Loan} و \lr{Loans}، و \lr{BrNo}ها در \lr{Loans} و \lr{Bank Branch} به تفکیک \lr{BrNo}.
    \item [$\bullet$] شمارش روی رکوردهای \lr{A-C} به تفکیک \lr{SSN}.
\end{itemize}
\subsection{\lr{e}}
اضافه کردن \lr{attribute} به نام \lr{sponsor\_ssn} در \lr{entity}ی \lr{Loan} که کلید خارجی از \lr{entity}ی \lr{Customer} است.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{table}[H]
    \centering
    \begin{tabular}{|c|c|c|}
    \hline
    \textbf{بیشترین تعداد خروجی حاصل} & \textbf{کمترین تعداد خروجی حاصل} & \textbf{}\\
    \hline
    100 & 100 & \lr{users INNER JOIN numbers}\\
    \hline
    199 & 100 & \lr{users LEFT OUTER JOIN numbers}\\
    \hline
    100 & 100 & \lr{users RIGHT OUTER JOIN numbers}\\
    \hline
    199 & 100 & \lr{users FULL OUTER JOIN numbers}\\
    \hline

    \end{tabular}
    \caption{جدول شماره 1}
    \label{tab:tab1}
\end{table}

\section{4}
\subsection{\lr{a}}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/4-a.png}
    \caption
	{
\lr{4-a}
	}
    \label{fig:fig1}
\end{figure}

\subsection{\lr{b}}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/4-b.png}
    \caption
	{
\lr{4-b}
	}
    \label{fig:fig1}
\end{figure}

\subsection{\lr{c}}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/4-c.png}
    \caption
	{
\lr{4-c}
	}
    \label{fig:fig1}
\end{figure}

\section{5}
\subsection{\lr{a}}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/5-a.png}
    \caption
	{
\lr{5-a}
	}
    \label{fig:fig1}
\end{figure}

\subsection{\lr{b}}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/5-b.png}
    \caption
	{
\lr{5-b}
	}
    \label{fig:fig1}
\end{figure}

\subsection{\lr{c}}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/5-c.png}
    \caption
	{
\lr{5-c}
	}
    \label{fig:fig1}
\end{figure}

\subsection{\lr{c}}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/5-d.png}
    \caption
	{
\lr{5-d}
	}
    \label{fig:fig1}
\end{figure}

\section{6}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/6.png}
    \caption
	{
\lr{6}
	}
    \label{fig:fig1}
\end{figure}

\section{7}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/7.png}
    \caption
	{
\lr{7}
	}
    \label{fig:fig1}
\end{figure}

\section{8}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/8.png}
    \caption
	{
\lr{8}
	}
    \label{fig:fig1}
\end{figure}
%------------------------------------------------------------------------------------------


\section*{منابع}
\renewcommand{\section}[2]{}%
\begin{thebibliography}{99} % assumes less than 100 references
%چنانچه مرجع فارسی نیز داشته باشید باید دستور فوق را فعال کنید و مراجع فارسی خود را بعد از این دستور وارد کنید


\begin{LTRitems}

\resetlatinfont

\bibitem{b1} https://searchoracle.techtarget.com/answer/LEFT-OUTER-JOIN-without-using-LEFT-OUTER-JOIN
\end{LTRitems}

\end{thebibliography}


\end{document}
