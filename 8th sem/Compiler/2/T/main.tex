\documentclass{article}

\usepackage{graphicx}
\usepackage{rotating}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{lscape}
%\usepackage{xcolor}
\usepackage{color}
\usepackage{amsfonts}
\usepackage{textcomp}
\usepackage{float}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage[sorting=none]{biblatex}
\usepackage[margin=1in]{geometry}
\usepackage[font={small,it}]{caption}
\usepackage[table,xcdraw]{xcolor}
\usepackage{placeins}
\usepackage{xepersian}





%\DeclareMathOperator*{\btie}{\bowtie}
\addbibresource{bibliography.bib}
\settextfont[Scale=1.2]{B-NAZANIN.TTF}
\setlatintextfont[Scale=1]{Times New Roman}
\renewcommand{\baselinestretch}{1.5}
\pagestyle{fancy}
\fancyhf{}
\rhead{تکلیف تئوری دوم درس کامپایلر}
\lhead{\thepage}
\rfoot{علیرضا ابره فروش}
\lfoot{9816603}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
%%%%%%%%%%
\lstset
{
    language=[latex]tex,
    basicstyle=\ttfamily,
    commentstyle=\color{black},
    columns=fullflexible,
    keepspaces=true,
    upquote=true,
    showstringspaces=false,
    morestring=[s]\\\%,
    stringstyle=\color{black},
}
%%%%%%%%%%
%beginMatlab
\definecolor{mygreen}{RGB}{28,172,0} % color values Red, Green, Blue
\definecolor{mylilas}{RGB}{170,55,241}
%endMatlab
\begin{document}
%beginMatlab
\lstset{language=Matlab,%
    %basicstyle=\color{red},
    breaklines=true,%
    morekeywords={matlab2tikz},
    keywordstyle=\color{blue},%
    morekeywords=[2]{1}, keywordstyle=[2]{\color{black}},
    identifierstyle=\color{black},%
    stringstyle=\color{mylilas},
    commentstyle=\color{mygreen},%
    showstringspaces=false,%without this there will be a symbol in the places where there is a space
    numbers=left,%
    numberstyle={\tiny \color{black}},% size of the numbers
    numbersep=9pt, % this defines how far the numbers are from the text
    emph=[1]{for,end,break},emphstyle=[1]\color{red}, %some words to emphasise
    %emph=[2]{word1,word2}, emphstyle=[2]{style},    
}
%endMatlab
\input{titlepage}

%\tableofcontents
\newpage

\section{}%1
\subsection{\lr{a}}
طبق الگوریتم زیر عمل می‌کنیم.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.75\textwidth]{figures/1a.png}
    \caption
	{}
    \label{fig:fig1}
\end{figure}

\begin{latin}
$
S \longrightarrow SS ^ \prime \\
S ^ {\prime} \longrightarrow +S|+P \\
P \longrightarrow PP ^ \prime \\
P ^ \prime \longrightarrow *P|*I \\
I \longrightarrow -I|(S)|D \\
D \longrightarrow 0|1N \\
N \longrightarrow NN ^ \prime|0|1|\varepsilon \\
N ^ \prime \longrightarrow N
$
\end{latin}

\subsection{\lr{b}}
طبق الگوریتم زیر عمل می‌کنیم.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.75\textwidth]{figures/1b.png}
    \caption
	{}
    \label{fig:fig1}
\end{figure}

\begin{latin}
$
S \longrightarrow US ^ \prime \\
S ^ \prime \longrightarrow aSS ^ \prime | \varepsilon \\
U \longrightarrow TU ^ \prime \\
U ^ \prime \longrightarrow uUU ^ \prime | \varepsilon \\
T \longrightarrow tT ^ \prime | fT ^ \prime | (S)T ^ \prime \\
T ^ \prime \longrightarrow | nT ^ \prime | \varepsilon
$
\end{latin}

\section{}%2
بسته به اینکه ابتدا کدام \lr{production} نظیر \lr{S} را پارس کنیم درخت پارس می‌تواند متفاوت باشد. پس دو درخت پارس نظیر اینکه اول \lr{and} را تجزیه کنیم یا \lr{or} مشابه تصاویر پایین موجود است. سپس به ازای هر یک از 3 \lr{S} ظاهر شده دو تا راه برای رسیدن به \lr{a} می‌باشد. پس در کل تعداد حالات برابر است با $2 \times 2 ^ 3 = 16$ خواهد بود.

\subsection{}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.25\textwidth]{figures/c1.jpg}
    \caption
	{}
    \label{fig:fig1}
\end{figure}
\subsection{}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.25\textwidth]{figures/c2.jpg}
    \caption
	{}
    \label{fig:fig1}
\end{figure}


\section{}%3
\subsection{\lr{a}}
تصویر زیر بیان شرط لازم و کافی برای \lr{LL(1)} بودن یک گرامر را شرح می‌دهد.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.75\textwidth]{figures/3a.png}
    \caption
	{}
    \label{fig:fig1}
\end{figure}
با توجه به این قضیه، داریم:

\begin{latin}
$
FIRST(Z) = \lbrace b, \varepsilon \rbrace \\
FIRST(Y) = \lbrace b, c \rbrace \\
FIRST(bX) = \lbrace b \rbrace \\
\Rightarrow FIRST(bX) \bigcap FIRST(Y) \neq \emptyset \\
, \\
FIRST(bZ) = \lbrace b \rbrace \\
FOLLOW(Z) = \lbrace c \rbrace \\
\Rightarrow FIRST(bZ) \bigcap FOLLOW(Z) = \emptyset
$
\end{latin}
از آنجایی که $FIRST(bX) \bigcap FIRST(Y) \neq \emptyset$ پس گرامر \lr{LL(1)} نیست.

\subsection{\lr{b}}
با حذف \lr{production}ِ $X \longrightarrow bX$ گرامر \lr{LL(1)} می‌شود. چون بین دو شرط بالا اولی که با حذف $bX$ ارضا می‌شود و دومی هم برقرار است.


\section{}%4

\subsection{\lr{a}}
\begin{latin}
% Please add the following required packages to your document preamble:
% \usepackage{graphicx}
\begin{table}[H]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|}
\hline
              & FIRST                                              & FOLLOW                           \\ \hline
S             & $\left\{ print, \textbf{ID}, \varepsilon \right\}$ & \{ \$ \}                         \\ \hline
ComponentList & $\left\{ print, \textbf{ID}, \varepsilon \right\}$ & \{ \$ \}                         \\ \hline
Component     & $\left\{ print, \textbf{ID} \right\}$              & $\left\{ ; \right\}$             \\ \hline
Expression    & $\left\{ (, \textbf{ID}, \textbf{NUM} \right\}$    & $\left\{ ), ; \right\}$          \\ \hline
Operator      & $\left\{ \textbf{ID}, \textbf{NUM} \right\}$       & $\left\{ +, -, *, ), ; \right\}$ \\ \hline
NextStage     & $\left\{ +, -, *, \varepsilon \right\}$            & $\left\{ ), ; \right\}$          \\ \hline
Operation     & $\left\{ +, -, * \right\}$                         & $\left\{ ), ; \right\}$          \\ \hline
\end{tabular}%
}
\end{table}
\end{latin}






\subsection{\lr{b}}

\begin{latin}
% Please add the following required packages to your document preamble:
% \usepackage{graphicx}
\begin{table}[H]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
\hline
              & ;                                       & print                                                     & (                                         & )                                       & \textbf{ID}                              & = & \textbf{NUM}                  & +                                       & -                                       & *                                       & \$                                          \\ \hline
S             &                                         & $S \longrightarrow ComponentList$                         &                                           &                                         & $S \longrightarrow ComponentList$                         &   &                                                &                                         &                                         &                                         & $S \longrightarrow ComponentList$           \\ \hline
ComponentList &                                         & $ComponentList \longrightarrow Component ; ComponentList$ &                                           &                                         & $ComponentList \longrightarrow Component ; ComponentList$ &   &                                                &                                         &                                         &                                         & $ComponentList \longrightarrow \varepsilon$ \\ \hline
Component     &                                         & $Component \longrightarrow print(Expression)$             &                                           &                                         & $Component \longrightarrow \textbf{ID} = Expression$      &   &                                                &                                         &                                         &                                         &                                             \\ \hline
Expression    &                                         &                                                           & $Expression \longrightarrow (Expression)$ &                                         & $Expression \longrightarrow Operand NextStage$            &   & $Expression \longrightarrow Operand NextStage$ &                                         &                                         &                                         &                                             \\ \hline
Operand       &                                         &                                                           &                                           &                                         & $Operand \longrightarrow \textbf{ID}$                     &   & $Operand \longrightarrow \textbf{NUM}$         &                                         &                                         &                                         &                                             \\ \hline
NextStage     & $NextStage \longrightarrow \varepsilon$ &                                                           &                                           & $NextStage \longrightarrow \varepsilon$ &                                                           &   &                                                & $NextStage \longrightarrow Operation$   & $NextStage \longrightarrow Operation$   & $NextStage \longrightarrow Operation$   &                                             \\ \hline
Operation     &                                         &                                                           &                                           &                                         &                                                           &   &                                                & $Operation \longrightarrow +Expression$ & $Operation \longrightarrow -Expression$ & $Operation \longrightarrow *Expression$ &                                             \\ \hline
\end{tabular}%
}
\end{table}
\end{latin}


\subsection{\lr{c}}
\begin{latin}
% Please add the following required packages to your document preamble:
% \usepackage{graphicx}
\begin{table}[H]
\resizebox{\columnwidth}{!}{%
\begin{tabular}{|l|r|r|l|}
\hline
\multicolumn{1}{|c|}{\textbf{Matched}}                                                & \multicolumn{1}{c|}{\textbf{Stack}}         & \multicolumn{1}{c|}{\textbf{Input}}                                                      & \multicolumn{1}{c|}{\textbf{Action}}                            \\ \hline
                                                                                      & S \$                                        & \textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$ &                                                                 \\ \hline
                                                                                      & ComponentList \$                            & \textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$ & output S $\longrightarrow$ ComponentList                        \\ \hline
                                                                                      & Component ; ComponentList \$                & \textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$ & output ComponentList $\longrightarrow$ Component ; ComponentList \\ \hline
                                                                                      & \textbf{ID} = Expression ; ComponentList \$ & \textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$ & output Component $\longrightarrow$ \textbf{ID} = Expression      \\ \hline
\textbf{ID}                                                                           & = Expression ; ComponentList \$             & = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$             & match \textbf{ID}                                               \\ \hline
\textbf{ID} =                                                                         & Expression ; ComponentList \$               & \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$               & match =                                                         \\ \hline
\textbf{ID} =                                                                         & Operand NextStage ; ComponentList \$        & \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$               & output Expression $\longrightarrow$ Operand NextStage            \\ \hline
\textbf{ID} =                                                                         & \textbf{NUM} NextStage ; ComponentList \$   & \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$               & output Operand $\longrightarrow$ \textbf{NUM}                    \\ \hline
\textbf{ID} = \textbf{NUM}                                                            & NextStage ; ComponentList \$                & + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                            & match \textbf{NUM}                                              \\ \hline
\textbf{ID} = \textbf{NUM}                                                            & Operation ; ComponentList \$                & + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                            & output NextStage $\longrightarrow$ Operation                     \\ \hline
\textbf{ID} = \textbf{NUM}                                                            & + Expression ; ComponentList \$             & + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                            & output Operation $\longrightarrow$ + Expression                  \\ \hline
\textbf{ID} = \textbf{NUM} +                                                          & Expression ; ComponentList \$               & ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                              & match +                                                         \\ \hline
\textbf{ID} = \textbf{NUM} +                                                          & ( Expression ) ; ComponentList \$           & ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                              & output Expression $\longrightarrow$ ( Expression )               \\ \hline
\textbf{ID} = \textbf{NUM} + (                                                        & Expression ) ; ComponentList \$             & \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                & match (                                                         \\ \hline
\textbf{ID} = \textbf{NUM} + (                                                        & Operand NextStage ) ; ComponentList \$      & \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                & output Expression $\longrightarrow$ Operand NextStage            \\ \hline
\textbf{ID} = \textbf{NUM} + (                                                        & \textbf{NUM} NextStage ) ; ComponentList \$ & \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                & output Operand $\longrightarrow$ \textbf{NUM}                    \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM}                                           & NextStage ) ; ComponentList \$              & * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                             & match \textbf{NUM}                                              \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM}                                           & Operation ) ; ComponentList \$              & * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                             & output NextStage $\longrightarrow$ Operation                     \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM}                                           & * Expression ) ; ComponentList \$           & * \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                             & output Operation $\longrightarrow$ * Expression                  \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} *                                         & Expression ) ; ComponentList \$             & \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                               & match *                                                         \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} *                                         & Operand NextStage ) ; ComponentList \$      & \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                               & output Expression $\longrightarrow$ Operand NextStage            \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} *                                         & \textbf{ID} NextStage ) ; ComponentList \$  & \textbf{ID} ) ; print ( \textbf{ID} ) ; \$                                               & output Operand $\longrightarrow$ \textbf{ID}                     \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID}                             & NextStage ) ; ComponentList \$              & ) ; print ( \textbf{ID} ) ; \$                                                           & match \textbf{ID}                                               \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID}                             & ) ; ComponentList \$                        & ) ; print ( \textbf{ID} ) ; \$                                                           & output NextStage $\longrightarrow \varepsilon$                   \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} )                           & ; ComponentList \$                          & ; print ( \textbf{ID} ) ; \$                                                             & match )                                                         \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ;                         & ComponentList \$                            & print ( \textbf{ID} ) ; \$                                                               & match ;                                                         \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ;                         & Component ; ComponentList \$                & print ( \textbf{ID} ) ; \$                                                               & output ComponentList $\longrightarrow$ Component ; ComponentList \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ;                         & print ( Experssion ) ; ComponentList \$     & print ( \textbf{ID} ) ; \$                                                               & output Component $\longrightarrow$ print ( Expression )          \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print                   & ( Experssion ) ; ComponentList \$           & ( \textbf{ID} ) ; \$                                                                     & match print                                                     \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print (                 & Experssion ) ; ComponentList \$             & \textbf{ID} ) ; \$                                                                       & match (                                                         \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print (                 & Operand NextStage ) ; ComponentList \$      & \textbf{ID} ) ; \$                                                                       & output Expression $\longrightarrow$ Operand NextStage            \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print (                 & \textbf{ID} NextStage ) ; ComponentList \$  & \textbf{ID} ) ; \$                                                                       & output Operand $\longrightarrow$ \textbf{ID}                     \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID}     & NextStage ) ; ComponentList \$              & ) ; \$                                                                                   & match \textbf{ID}                                               \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID}     & ) ; ComponentList \$                        & ) ; \$                                                                                   & output NextStage $\longrightarrow \varepsilon$                   \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} )   & ; ComponentList \$                          & ; \$                                                                                     & match )                                                         \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; & ComponentList \$                            & \$                                                                                       & match ;                                                         \\ \hline
\textbf{ID} = \textbf{NUM} + ( \textbf{NUM} * \textbf{ID} ) ; print ( \textbf{ID} ) ; & \$                                          & \$                                                                                       & output ComponentList $\longrightarrow \varepsilon$               \\ \hline
\end{tabular}%
}
\end{table}
\end{latin}

\subsection{\lr{d}}
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{figures/c7.jpg}
    \caption
	{}
    \label{fig:fig1}
\end{figure}


\section{}%5
\subsection{\lr{a}}
برای اینکه ثابت کنیم این گرامر مبهم است کافی‌ست رشته‌ای بیاوریم که بیش از یک درخت پارس داشته باشد. برای مثال رشته‌ی $a b a b a$ به دو نحو زیر پارس می‌شود:
\subsubsection{}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.25\textwidth]{figures/c5.jpg}
    \caption
	{}
    \label{fig:fig1}
\end{figure}
\subsubsection{}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.25\textwidth]{figures/c6.jpg}
    \caption
	{}
    \label{fig:fig1}
\end{figure}




\subsection{\lr{b}}
\begin{latin}
$
A \longrightarrow a A ^ \prime \\
A ^ \prime \longrightarrow b A A ^ \prime | \varepsilon
$
\end{latin}


\subsection{\lr{c}}
مبهم است. برای مثال رشته‌ی $a b a b a$ به دو نحو زیر پارس می‌شود:
\subsubsection{}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.25\textwidth]{figures/c3.jpg}
    \caption
	{}
    \label{fig:fig1}
\end{figure}
\subsubsection{}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.25\textwidth]{figures/c4.jpg}
    \caption
	{}
    \label{fig:fig1}
\end{figure}

\subsection{\lr{c}}
\begin{latin}
$
A \longrightarrow a A ^ \prime \\
A ^ \prime \longrightarrow B A ^ \prime | \varepsilon \\
B \longrightarrow b \\
$
\end{latin}



\section{}%6
\begin{latin}
$
E \longrightarrow E E + | E E * | id
$
\end{latin}
حال \lr{left recursion} را از این گرامر حذف می‌کنیم.
\begin{latin}
$
E \longrightarrow id E ^ \prime \\
E ^ \prime \longrightarrow E + E ^ \prime | E * E ^ \prime | \varepsilon
$
\end{latin}
سپس \lr{left factoring} را انجام می‌دهیم.
\begin{latin}
$
E \longrightarrow id E ^ \prime \\
E ^ \prime \longrightarrow E E''  | \varepsilon \\
E'' \longrightarrow + E ^ \prime | * E ^ \prime
$
\end{latin}

تصویر زیر بیان شرط لازم و کافی برای \lr{LL(1)} بودن یک گرامر را شرح می‌دهد.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.75\textwidth]{figures/3a.png}
    \caption
	{}
    \label{fig:fig1}
\end{figure}

حال مجموعه‌های \lr{FIRST} و \lr{FOLLOW} را به دست می‌آوریم.
\begin{latin}
% Please add the following required packages to your document preamble:
% \usepackage{graphicx}
\begin{table}[H]
\resizebox{\columnwidth}{!}{%
\begin{tabular}{|c|c|c|}
\hline
    & FIRST                              & FOLLOW       \\ \hline
$E$   & $\left\{ id \right\}$              & \{ +, *, \$ \} \\ \hline
$E'$  & $\left\{ id, \varepsilon \right\}$ & \{ +, *, \$ \} \\ \hline
$E''$ & $\left\{ +, * \right\}$            & \{ +, *, \$ \} \\ \hline
\end{tabular}%
}
\end{table}
\end{latin}
از آنجایی که \lr{FOLLOW($E'$)} با \lr{FIRST($EE''$)} اشتراک ندارد، پس  گرامر \lr{LL(1)} است.



%------------------------------------------------------------------------------------------
\end{document}